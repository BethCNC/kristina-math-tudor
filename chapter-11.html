<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 4: Proportions & Percentages - MAT 143</title>
    <meta name="description" content="Learn proportions, percentages, and rates with step-by-step lessons, practice problems, and real-world examples for MAT 143.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/public/favicons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/favicons/favicon-16x16.png">
    
    <!-- Enhanced Design System with Semantic Tokens -->
    <link rel="stylesheet" href="src/styles/globals.css">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="bg-[var(--color-background-default)] text-[var(--color-text-primary)] font-['Host_Grotesk'] min-h-screen">
    <!-- Enhanced Responsive Header -->
    <header class="bg-[var(--color-background-default)] border-b border-[var(--color-border-secondary)] shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="flex items-center space-x-3 text-[var(--color-text-primary)] hover:text-[var(--color-text-brand-primary)] transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--color-brand-default)] focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="Back to Dashboard">
                        <i data-lucide="arrow-left" aria-hidden="true" class="w-5 h-5"></i>
                        <span class="text-lg font-medium hidden sm:inline">Back to Dashboard</span>
                        <span class="text-lg font-medium sm:hidden">Back</span>
                    </a>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-[var(--color-brand-default)] rounded-lg flex items-center justify-center">
                        <i data-lucide="calculator" aria-hidden="true" class="w-5 h-5 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-lg sm:text-xl font-medium text-[var(--color-text-primary)]">Chapter 4</h1>
                        <p class="text-sm text-[var(--color-text-secondary)]">Proportions & Percentages</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 max-w-6xl">
        <!-- Progress Tracker -->
        <section class="mb-6 sm:mb-8" aria-labelledby="progress-heading">
            <h2 id="progress-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üìä Your Progress</h2>
            <div class="adhd-card">
                <div class="flex flex-col sm:flex-row items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-[var(--color-text-primary)]">Chapter 4 Progress</h3>
                    <span class="text-sm text-[var(--color-text-secondary)]">Test 2 Preparation</span>
                </div>
                <div class="w-full bg-[var(--color-background-secondary)] rounded-full h-3 mb-4" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" aria-label="Chapter 4 progress">
                    <div class="bg-[var(--color-brand-default)] h-3 rounded-full" style="width: 25%;"></div>
                </div>
                <div class="flex flex-wrap items-center justify-between text-sm gap-2">
                    <span class="text-[var(--color-text-positive-primary)]">‚úÖ Section 4.1 Complete</span>
                    <span class="text-[var(--color-text-warning-primary)]">‚è≥ Section 4.2 In Progress</span>
                    <span class="text-[var(--color-text-secondary)]">‚è≥ Section 4.3 Not Started</span>
                </div>
            </div>
        </section>

        <!-- Lesson Navigation -->
        <section class="mb-6 sm:mb-8" aria-labelledby="lessons-heading">
            <h2 id="lessons-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üìö Lessons</h2>
            <div class="responsive-grid">
                <!-- Section 4.1 -->
                <div class="adhd-card border-[var(--color-border-positive)]" role="article" aria-labelledby="section-4-1">
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-[var(--color-positive-default)] rounded-lg flex items-center justify-center flex-shrink-0" aria-hidden="true">
                            <i data-lucide="check" class="w-6 h-6 text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 id="section-4-1" class="text-lg font-medium text-[var(--color-text-primary)] mb-2">Section 4.1: Proportions</h3>
                            <p class="text-sm text-[var(--color-text-secondary)] mb-3">Understanding and solving proportions</p>
                            <div class="flex flex-wrap items-center gap-2 mb-4">
                                <span class="text-xs bg-[var(--color-positive-default)] text-white px-2 py-1 rounded-full">COMPLETE</span>
                                <span class="text-xs bg-[var(--color-brand-default)] text-white px-2 py-1 rounded-full">15 min</span>
                            </div>
                            <button class="adhd-button adhd-button-primary w-full" onclick="showLesson('4-1')" aria-label="Review Section 4.1">
                                <i data-lucide="book-open" class="w-4 h-4" aria-hidden="true"></i>
                                Review Lesson
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Section 4.2 -->
                <div class="adhd-card border-[var(--color-border-warning)]" role="article" aria-labelledby="section-4-2">
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-[var(--color-warning-default)] rounded-lg flex items-center justify-center flex-shrink-0" aria-hidden="true">
                            <i data-lucide="play" class="w-6 h-6 text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 id="section-4-2" class="text-lg font-medium text-[var(--color-text-primary)] mb-2">Section 4.2: Percentages</h3>
                            <p class="text-sm text-[var(--color-text-secondary)] mb-3">Calculating percentages and percentage change</p>
                            <div class="flex flex-wrap items-center gap-2 mb-4">
                                <span class="text-xs bg-[var(--color-warning-default)] text-white px-2 py-1 rounded-full">IN PROGRESS</span>
                                <span class="text-xs bg-[var(--color-brand-default)] text-white px-2 py-1 rounded-full">20 min</span>
                            </div>
                            <button class="adhd-button adhd-button-primary w-full" onclick="showLesson('4-2')" aria-label="Continue Section 4.2">
                                <i data-lucide="play" class="w-4 h-4" aria-hidden="true"></i>
                                Continue Lesson
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Section 4.3 -->
                <div class="adhd-card" role="article" aria-labelledby="section-4-3">
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-[var(--color-neutral-default)] rounded-lg flex items-center justify-center flex-shrink-0" aria-hidden="true">
                            <i data-lucide="lock" class="w-6 h-6 text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 id="section-4-3" class="text-lg font-medium text-[var(--color-text-primary)] mb-2">Section 4.3: Rates</h3>
                            <p class="text-sm text-[var(--color-text-secondary)] mb-3">Unit rates and rates of change</p>
                            <div class="flex flex-wrap items-center gap-2 mb-4">
                                <span class="text-xs bg-[var(--color-neutral-default)] text-white px-2 py-1 rounded-full">LOCKED</span>
                                <span class="text-xs bg-[var(--color-brand-default)] text-white px-2 py-1 rounded-full">25 min</span>
                            </div>
                            <button class="adhd-button adhd-button-secondary w-full" disabled aria-label="Section 4.3 locked">
                                <i data-lucide="lock" class="w-4 h-4" aria-hidden="true"></i>
                                Complete 4.2 First
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Current Lesson Content -->
        <section id="lesson-content" class="mb-6 sm:mb-8" aria-labelledby="lesson-heading" style="display: none;">
            <h2 id="lesson-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üìñ Current Lesson</h2>
            <div class="adhd-card">
                <div id="lesson-body">
                    <!-- Lesson content will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Key Formulas -->
        <section class="mb-6 sm:mb-8" aria-labelledby="formulas-heading">
            <h2 id="formulas-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üî¢ Key Formulas</h2>
            <div class="responsive-grid">
                <div class="adhd-card" role="article" aria-labelledby="proportion-formula">
                    <h3 id="proportion-formula" class="text-lg font-medium text-[var(--color-text-primary)] mb-4">Proportions</h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-secondary)] mb-1">Cross Multiplication</p>
                            <p class="font-mono text-lg text-[var(--color-text-primary)]">a/b = c/d ‚Üí a√ód = b√óc</p>
                        </div>
                        <div class="p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-secondary)] mb-1">Solving for x</p>
                            <p class="font-mono text-lg text-[var(--color-text-primary)]">x = (b√óc) / a</p>
                        </div>
                    </div>
                </div>

                <div class="adhd-card" role="article" aria-labelledby="percentage-formula">
                    <h3 id="percentage-formula" class="text-lg font-medium text-[var(--color-text-primary)] mb-4">Percentages</h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-secondary)] mb-1">Percentage of a number</p>
                            <p class="font-mono text-lg text-[var(--color-text-primary)]">P% of N = (P/100) √ó N</p>
                        </div>
                        <div class="p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-secondary)] mb-1">Percentage change</p>
                            <p class="font-mono text-lg text-[var(--color-text-primary)]">% Change = (New - Old) / Old √ó 100%</p>
                        </div>
                    </div>
                </div>

                <div class="adhd-card" role="article" aria-labelledby="rate-formula">
                    <h3 id="rate-formula" class="text-lg font-medium text-[var(--color-text-primary)] mb-4">Rates</h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-secondary)] mb-1">Unit rate</p>
                            <p class="font-mono text-lg text-[var(--color-text-primary)]">Rate = Amount / Time</p>
                        </div>
                        <div class="p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-secondary)] mb-1">Distance formula</p>
                            <p class="font-mono text-lg text-[var(--color-text-primary)]">Distance = Rate √ó Time</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Practice Problems -->
        <section class="mb-6 sm:mb-8" aria-labelledby="practice-heading">
            <h2 id="practice-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üéØ Practice Problems</h2>
            <div class="responsive-grid">
                <div class="adhd-card" role="article" aria-labelledby="problem-1">
                    <h3 id="problem-1" class="text-lg font-medium text-[var(--color-text-primary)] mb-4">Problem 1: Proportions</h3>
                    <p class="text-sm text-[var(--color-text-secondary)] mb-4">If 3 apples cost $2.40, how much do 7 apples cost?</p>
                    <div class="space-y-2">
                        <button class="adhd-button adhd-button-secondary w-full justify-start" onclick="showSolution('1')" aria-label="Show solution for problem 1">
                            <i data-lucide="eye" class="w-4 h-4" aria-hidden="true"></i>
                            Show Solution
                        </button>
                        <div id="solution-1" class="hidden p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-primary)]"><strong>Solution:</strong></p>
                            <p class="text-sm text-[var(--color-text-secondary)]">Set up proportion: 3/2.40 = 7/x</p>
                            <p class="text-sm text-[var(--color-text-secondary)]">Cross multiply: 3x = 2.40 √ó 7</p>
                            <p class="text-sm text-[var(--color-text-secondary)]">Solve: x = 16.80/3 = $5.60</p>
                        </div>
                    </div>
                </div>

                <div class="adhd-card" role="article" aria-labelledby="problem-2">
                    <h3 id="problem-2" class="text-lg font-medium text-[var(--color-text-primary)] mb-4">Problem 2: Percentages</h3>
                    <p class="text-sm text-[var(--color-text-secondary)] mb-4">A shirt originally costs $50. It's on sale for 20% off. What's the sale price?</p>
                    <div class="space-y-2">
                        <button class="adhd-button adhd-button-secondary w-full justify-start" onclick="showSolution('2')" aria-label="Show solution for problem 2">
                            <i data-lucide="eye" class="w-4 h-4" aria-hidden="true"></i>
                            Show Solution
                        </button>
                        <div id="solution-2" class="hidden p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-primary)]"><strong>Solution:</strong></p>
                            <p class="text-sm text-[var(--color-text-secondary)]">Discount = 20% of $50 = 0.20 √ó $50 = $10</p>
                            <p class="text-sm text-[var(--color-text-secondary)]">Sale price = $50 - $10 = $40</p>
                        </div>
                    </div>
                </div>

                <div class="adhd-card" role="article" aria-labelledby="problem-3">
                    <h3 id="problem-3" class="text-lg font-medium text-[var(--color-text-primary)] mb-4">Problem 3: Rates</h3>
                    <p class="text-sm text-[var(--color-text-secondary)] mb-4">If you drive 240 miles in 4 hours, what's your average speed?</p>
                    <div class="space-y-2">
                        <button class="adhd-button adhd-button-secondary w-full justify-start" onclick="showSolution('3')" aria-label="Show solution for problem 3">
                            <i data-lucide="eye" class="w-4 h-4" aria-hidden="true"></i>
                            Show Solution
                        </button>
                        <div id="solution-3" class="hidden p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-primary)]"><strong>Solution:</strong></p>
                            <p class="text-sm text-[var(--color-text-secondary)]">Speed = Distance / Time</p>
                            <p class="text-sm text-[var(--color-text-secondary)]">Speed = 240 miles / 4 hours = 60 mph</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Next Steps -->
        <section class="mb-6 sm:mb-8" aria-labelledby="next-steps-heading">
            <h2 id="next-steps-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üéØ What's Next?</h2>
            <div class="adhd-card border-[var(--color-border-brand)]">
                <div class="flex items-start space-x-4">
                    <div class="w-12 h-12 bg-[var(--color-brand-default)] rounded-lg flex items-center justify-center flex-shrink-0" aria-hidden="true">
                        <i data-lucide="target" class="w-6 h-6 text-white"></i>
                    </div>
                    <div class="flex-1">
                        <h3 class="text-lg font-medium text-[var(--color-text-primary)] mb-2">Your Next Steps</h3>
                        <div class="space-y-2">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="check-circle" class="w-4 h-4 text-[var(--color-positive-default)]" aria-hidden="true"></i>
                                <span class="text-sm text-[var(--color-text-secondary)]">Complete Section 4.2: Percentages</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <i data-lucide="book-open" class="w-4 h-4 text-[var(--color-brand-default)]" aria-hidden="true"></i>
                                <span class="text-sm text-[var(--color-text-secondary)]">Practice 5 more problems</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <i data-lucide="calendar" class="w-4 h-4 text-[var(--color-warning-default)]" aria-hidden="true"></i>
                                <span class="text-sm text-[var(--color-text-secondary)]">Test 2 in 7 days - focus on Ch. 4 & 5</span>
                            </div>
                        </div>
                        <div class="mt-4 flex flex-col sm:flex-row gap-2">
                            <button class="adhd-button adhd-button-primary" onclick="showLesson('4-2')" aria-label="Continue with Section 4.2">
                                <i data-lucide="play" class="w-4 h-4" aria-hidden="true"></i>
                                Continue Learning
                            </button>
                            <a href="tutor.html" class="adhd-button adhd-button-secondary" aria-label="Get help from AI tutor">
                                <i data-lucide="brain-circuit" class="w-4 h-4" aria-hidden="true"></i>
                                Ask AI Tutor
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Initialize Icons and JavaScript -->
    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Lesson content
        const lessons = {
            '4-1': {
                title: 'Section 4.1: Understanding Proportions',
                content: `
                    <h3 class="text-lg font-medium text-[var(--color-text-primary)] mb-4">What is a Proportion?</h3>
                    <p class="text-sm text-[var(--color-text-secondary)] mb-4">A proportion is an equation that states two ratios are equal.</p>
                    
                    <div class="p-4 bg-[var(--color-background-secondary)] rounded-lg mb-4">
                        <p class="text-sm text-[var(--color-text-primary)] font-mono">a/b = c/d</p>
                        <p class="text-xs text-[var(--color-text-secondary)] mt-2">This means "a is to b as c is to d"</p>
                    </div>
                    
                    <h4 class="text-md font-medium text-[var(--color-text-primary)] mb-3">Step-by-Step Method:</h4>
                    <ol class="text-sm text-[var(--color-text-secondary)] space-y-2 list-decimal list-inside">
                        <li>Set up the proportion with the unknown (x)</li>
                        <li>Cross multiply: a √ó d = b √ó c</li>
                        <li>Solve for x</li>
                        <li>Check your answer</li>
                    </ol>
                    
                    <div class="mt-4 p-3 bg-[var(--color-background-warning)] rounded-lg">
                        <p class="text-sm text-[var(--color-text-warning-primary)]"><strong>Example:</strong> If 2 pizzas cost $12, how much do 5 pizzas cost?</p>
                        <p class="text-sm text-[var(--color-text-secondary)]">Set up: 2/12 = 5/x</p>
                        <p class="text-sm text-[var(--color-text-secondary)]">Cross multiply: 2x = 12 √ó 5 = 60</p>
                        <p class="text-sm text-[var(--color-text-secondary)]">Solve: x = 60/2 = $30</p>
                    </div>
                `
            },
            '4-2': {
                title: 'Section 4.2: Working with Percentages',
                content: `
                    <h3 class="text-lg font-medium text-[var(--color-text-primary)] mb-4">Percentage Basics</h3>
                    <p class="text-sm text-[var(--color-text-secondary)] mb-4">Percent means "per hundred" - so 25% means 25 out of 100.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div class="p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-primary)] font-medium">Finding Percentage of a Number</p>
                            <p class="text-xs text-[var(--color-text-secondary)]">P% of N = (P/100) √ó N</p>
                        </div>
                        <div class="p-3 bg-[var(--color-background-secondary)] rounded-lg">
                            <p class="text-sm text-[var(--color-text-primary)] font-medium">Percentage Change</p>
                            <p class="text-xs text-[var(--color-text-secondary)]">% Change = (New - Old) / Old √ó 100%</p>
                        </div>
                    </div>
                    
                    <h4 class="text-md font-medium text-[var(--color-text-primary)] mb-3">Common Percentage Problems:</h4>
                    <ul class="text-sm text-[var(--color-text-secondary)] space-y-1 list-disc list-inside">
                        <li>Finding discounts and sale prices</li>
                        <li>Calculating tips and taxes</li>
                        <li>Determining percentage increase/decrease</li>
                        <li>Converting between fractions, decimals, and percentages</li>
                    </ul>
                `
            }
        };

        function showLesson(section) {
            const lessonContent = document.getElementById('lesson-content');
            const lessonBody = document.getElementById('lesson-body');
            const lessonHeading = document.getElementById('lesson-heading');
            
            if (lessons[section]) {
                lessonHeading.textContent = lessons[section].title;
                lessonBody.innerHTML = lessons[section].content;
                lessonContent.style.display = 'block';
                lessonContent.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function showSolution(problemNum) {
            const solution = document.getElementById(`solution-${problemNum}`);
            if (solution.classList.contains('hidden')) {
                solution.classList.remove('hidden');
            } else {
                solution.classList.add('hidden');
            }
        }

        // Initialize with first lesson
        showLesson('4-1');
    </script>
</body>
</html>
