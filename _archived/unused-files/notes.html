<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Notes & Progress - Kristina's Academic Success Dashboard</title>
    <meta name="description" content="Take notes, track progress, and organize your study materials for MAT 143 and ENG 111.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/public/favicons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/favicons/favicon-16x16.png">
    
    <!-- Enhanced Design System with Semantic Tokens -->
    <link rel="stylesheet" href="src/styles/globals.css">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="bg-[var(--color-background-default)] text-[var(--color-text-primary)] font-['Host_Grotesk'] min-h-screen">
    <!-- Enhanced Responsive Header -->
    <header class="bg-[var(--color-background-default)] border-b border-[var(--color-border-secondary)] shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="flex items-center space-x-3 text-[var(--color-text-primary)] hover:text-[var(--color-text-brand-primary)] transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--color-brand-default)] focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="Back to Dashboard">
                        <i data-lucide="arrow-left" aria-hidden="true" class="w-5 h-5"></i>
                        <span class="text-lg font-medium hidden sm:inline">Back to Dashboard</span>
                        <span class="text-lg font-medium sm:hidden">Back</span>
                    </a>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-[var(--color-brand-default)] rounded-lg flex items-center justify-center">
                        <i data-lucide="notebook" aria-hidden="true" class="w-5 h-5 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-lg sm:text-xl font-medium text-[var(--color-text-primary)]">Study Notes</h1>
                        <p class="text-sm text-[var(--color-text-secondary)]">Track Your Progress</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 max-w-6xl">
        <!-- Progress Overview -->
        <section class="mb-8" aria-labelledby="progress-heading">
            <h2 id="progress-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üìä Study Progress Overview</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Math Progress -->
                <div class="adhd-card">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-[var(--color-brand-default)] rounded-lg flex items-center justify-center">
                            <i data-lucide="calculator" class="w-5 h-5 text-white"></i>
                        </div>
                        <h3 class="text-lg font-medium text-[var(--color-text-primary)]">MAT 143 Progress</h3>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-[var(--color-text-secondary)]">Chapters Completed</span>
                            <span class="text-[var(--color-text-primary)] font-medium">2/8</span>
                        </div>
                        <div class="w-full bg-[var(--color-background-secondary)] rounded-full h-2">
                            <div class="bg-[var(--color-brand-default)] h-2 rounded-full" style="width: 25%;"></div>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-[var(--color-text-secondary)]">Study Sessions</span>
                            <span class="text-[var(--color-text-primary)] font-medium">12</span>
                        </div>
                    </div>
                </div>

                <!-- English Progress -->
                <div class="adhd-card">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-[var(--color-brand-default)] rounded-lg flex items-center justify-center">
                            <i data-lucide="book-open" class="w-5 h-5 text-white"></i>
                        </div>
                        <h3 class="text-lg font-medium text-[var(--color-text-primary)]">ENG 111 Progress</h3>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-[var(--color-text-secondary)]">Essays Completed</span>
                            <span class="text-[var(--color-text-primary)] font-medium">1/3</span>
                        </div>
                        <div class="w-full bg-[var(--color-background-secondary)] rounded-full h-2">
                            <div class="bg-[var(--color-brand-default)] h-2 rounded-full" style="width: 33%;"></div>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-[var(--color-text-secondary)]">Writing Sessions</span>
                            <span class="text-[var(--color-text-primary)] font-medium">8</span>
                        </div>
                    </div>
                </div>

                <!-- Study Streak -->
                <div class="adhd-card">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-[var(--color-brand-default)] rounded-lg flex items-center justify-center">
                            <i data-lucide="flame" class="w-5 h-5 text-white"></i>
                        </div>
                        <h3 class="text-lg font-medium text-[var(--color-text-primary)]">Study Streak</h3>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-[var(--color-text-secondary)]">Current Streak</span>
                            <span class="text-[var(--color-text-primary)] font-medium">5 days</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-[var(--color-text-secondary)]">Total Time</span>
                            <span class="text-[var(--color-text-primary)] font-medium">24 hours</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Note-Taking Interface -->
        <section class="mb-8" aria-labelledby="notes-heading">
            <h2 id="notes-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üìù Take Notes</h2>
            <div class="adhd-card">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Note Input -->
                    <div class="lg:col-span-2">
                        <div class="mb-4">
                            <label for="note-topic" class="block text-sm font-medium text-[var(--color-text-primary)] mb-2">Topic/Chapter</label>
                            <select id="note-topic" class="adhd-input w-full">
                                <option value="">Select a topic...</option>
                                <option value="chapter-1">Chapter 1: Thinking Mathematically</option>
                                <option value="chapter-4">Chapter 4: Proportions & Percentages</option>
                                <option value="chapter-5">Chapter 5: Linear & Exponential Functions</option>
                                <option value="chapter-6">Chapter 6: Personal Finance</option>
                                <option value="chapter-7">Chapter 7: Measurement & Conversions</option>
                                <option value="chapter-10">Chapter 10: Probability</option>
                                <option value="chapter-11">Chapter 11: Statistics</option>
                                <option value="chapter-13">Chapter 13: Voting & Apportionment</option>
                                <option value="eng111">ENG 111: English Composition</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label for="note-title" class="block text-sm font-medium text-[var(--color-text-primary)] mb-2">Note Title</label>
                            <input type="text" id="note-title" class="adhd-input w-full" placeholder="Enter a title for your note...">
                        </div>
                        
                        <div class="mb-4">
                            <label for="note-content" class="block text-sm font-medium text-[var(--color-text-primary)] mb-2">Note Content</label>
                            <textarea id="note-content" rows="8" class="adhd-input w-full" placeholder="Write your notes here..."></textarea>
                        </div>
                        
                        <div class="flex flex-wrap gap-2">
                            <button onclick="saveNote()" class="adhd-button adhd-button-primary">
                                <i data-lucide="save" class="w-4 h-4" aria-hidden="true"></i>
                                Save Note
                            </button>
                            <button onclick="clearNote()" class="adhd-button adhd-button-secondary">
                                <i data-lucide="trash-2" class="w-4 h-4" aria-hidden="true"></i>
                                Clear
                            </button>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="space-y-4">
                        <div class="adhd-card">
                            <h3 class="text-lg font-medium text-[var(--color-text-primary)] mb-3">Quick Actions</h3>
                            <div class="space-y-2">
                                <button onclick="addStudyCard()" class="adhd-button adhd-button-secondary w-full justify-start">
                                    <i data-lucide="credit-card" class="w-4 h-4" aria-hidden="true"></i>
                                    Create Study Card
                                </button>
                                <button onclick="addReminder()" class="adhd-button adhd-button-secondary w-full justify-start">
                                    <i data-lucide="bell" class="w-4 h-4" aria-hidden="true"></i>
                                    Set Reminder
                                </button>
                                <button onclick="exportNotes()" class="adhd-button adhd-button-secondary w-full justify-start">
                                    <i data-lucide="download" class="w-4 h-4" aria-hidden="true"></i>
                                    Export Notes
                                </button>
                            </div>
                        </div>
                        
                        <div class="adhd-card">
                            <h3 class="text-lg font-medium text-[var(--color-text-primary)] mb-3">Study Tips</h3>
                            <div class="text-sm text-[var(--color-text-secondary)] space-y-2">
                                <p>üí° Use the 25-minute Pomodoro technique for focused study sessions.</p>
                                <p>üìù Write notes in your own words to improve understanding.</p>
                                <p>üîÑ Review notes within 24 hours for better retention.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Saved Notes -->
        <section class="mb-8" aria-labelledby="saved-notes-heading">
            <h2 id="saved-notes-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">üìö Saved Notes</h2>
            <div id="saved-notes-container" class="space-y-4">
                <!-- Notes will be loaded here -->
            </div>
        </section>

        <!-- Study Session Tracking -->
        <section class="mb-8" aria-labelledby="sessions-heading">
            <h2 id="sessions-heading" class="text-xl sm:text-2xl font-medium text-[var(--color-text-primary)] mb-6">‚è±Ô∏è Study Sessions</h2>
            <div class="adhd-card">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-[var(--color-text-primary)]">Today's Study Session</h3>
                    <div class="flex items-center space-x-2">
                        <span id="session-timer" class="text-2xl font-mono text-[var(--color-brand-default)]">00:00:00</span>
                        <button id="timer-toggle" onclick="toggleTimer()" class="adhd-button adhd-button-primary">
                            <i data-lucide="play" class="w-4 h-4" aria-hidden="true"></i>
                            Start
                        </button>
                    </div>
                </div>
                <div id="session-log" class="space-y-2">
                    <!-- Session log will be displayed here -->
                </div>
            </div>
        </section>
    </main>

    <script>
        // Note-taking functionality
        let notes = JSON.parse(localStorage.getItem('studyNotes') || '[]');
        let sessionTimer = null;
        let sessionStartTime = null;
        let sessionDuration = 0;

        function saveNote() {
            const topic = document.getElementById('note-topic').value;
            const title = document.getElementById('note-title').value;
            const content = document.getElementById('note-content').value;
            
            if (!topic || !title || !content) {
                alert('Please fill in all fields.');
                return;
            }
            
            const note = {
                id: Date.now(),
                topic: topic,
                title: title,
                content: content,
                timestamp: new Date().toISOString(),
                tags: []
            };
            
            notes.unshift(note);
            localStorage.setItem('studyNotes', JSON.stringify(notes));
            displayNotes();
            clearNote();
            
            // Show success message
            const successMsg = document.createElement('div');
            successMsg.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg z-50';
            successMsg.textContent = 'Note saved successfully!';
            document.body.appendChild(successMsg);
            setTimeout(() => successMsg.remove(), 3000);
        }

        function clearNote() {
            document.getElementById('note-topic').value = '';
            document.getElementById('note-title').value = '';
            document.getElementById('note-content').value = '';
        }

        function displayNotes() {
            const container = document.getElementById('saved-notes-container');
            if (notes.length === 0) {
                container.innerHTML = '<p class="text-[var(--color-text-secondary)] text-center py-8">No notes yet. Start taking notes above!</p>';
                return;
            }
            
            container.innerHTML = notes.map(note => `
                <div class="adhd-card">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="text-xs bg-[var(--color-brand-default)] text-white px-2 py-1 rounded-full">${note.topic}</span>
                                <span class="text-xs text-[var(--color-text-secondary)]">${new Date(note.timestamp).toLocaleDateString()}</span>
                            </div>
                            <h4 class="text-lg font-medium text-[var(--color-text-primary)] mb-2">${note.title}</h4>
                            <p class="text-[var(--color-text-secondary)] text-sm">${note.content.substring(0, 100)}${note.content.length > 100 ? '...' : ''}</p>
                        </div>
                        <div class="flex items-center space-x-2 ml-4">
                            <button onclick="editNote(${note.id})" class="adhd-button adhd-button-secondary text-sm">
                                <i data-lucide="edit" class="w-4 h-4" aria-hidden="true"></i>
                            </button>
                            <button onclick="deleteNote(${note.id})" class="adhd-button adhd-button-danger text-sm">
                                <i data-lucide="trash-2" class="w-4 h-4" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function deleteNote(id) {
            if (confirm('Are you sure you want to delete this note?')) {
                notes = notes.filter(note => note.id !== id);
                localStorage.setItem('studyNotes', JSON.stringify(notes));
                displayNotes();
            }
        }

        function editNote(id) {
            const note = notes.find(n => n.id === id);
            if (note) {
                document.getElementById('note-topic').value = note.topic;
                document.getElementById('note-title').value = note.title;
                document.getElementById('note-content').value = note.content;
                
                // Remove the original note
                notes = notes.filter(n => n.id !== id);
                localStorage.setItem('studyNotes', JSON.stringify(notes));
                displayNotes();
            }
        }

        // Timer functionality
        function toggleTimer() {
            const button = document.getElementById('timer-toggle');
            const icon = button.querySelector('i');
            
            if (sessionTimer) {
                // Stop timer
                clearInterval(sessionTimer);
                sessionTimer = null;
                button.innerHTML = '<i data-lucide="play" class="w-4 h-4" aria-hidden="true"></i> Start';
                icon.setAttribute('data-lucide', 'play');
                
                // Log session
                logSession();
            } else {
                // Start timer
                sessionStartTime = new Date();
                sessionDuration = 0;
                sessionTimer = setInterval(updateTimer, 1000);
                button.innerHTML = '<i data-lucide="pause" class="w-4 h-4" aria-hidden="true"></i> Stop';
                icon.setAttribute('data-lucide', 'pause');
            }
            
            lucide.createIcons();
        }

        function updateTimer() {
            sessionDuration++;
            const hours = Math.floor(sessionDuration / 3600);
            const minutes = Math.floor((sessionDuration % 3600) / 60);
            const seconds = sessionDuration % 60;
            
            document.getElementById('session-timer').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function logSession() {
            const duration = formatDuration(sessionDuration);
            const logEntry = {
                date: new Date().toLocaleDateString(),
                duration: duration,
                timestamp: new Date().toISOString()
            };
            
            // Add to session log
            const sessionLog = document.getElementById('session-log');
            const logItem = document.createElement('div');
            logItem.className = 'flex justify-between items-center py-2 border-b border-[var(--color-border-secondary)]';
            logItem.innerHTML = `
                <span class="text-[var(--color-text-primary)]">${logEntry.date}</span>
                <span class="text-[var(--color-text-secondary)]">${logEntry.duration}</span>
            `;
            sessionLog.insertBefore(logItem, sessionLog.firstChild);
        }

        function formatDuration(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            return `${hours}h ${minutes}m ${secs}s`;
        }

        // Additional functions
        function addStudyCard() {
            alert('Study card feature coming soon!');
        }

        function addReminder() {
            alert('Reminder feature coming soon!');
        }

        function exportNotes() {
            const dataStr = JSON.stringify(notes, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'study-notes.json';
            link.click();
            URL.revokeObjectURL(url);
        }

        // Initialize
        displayNotes();
        lucide.createIcons();
    </script>
</body>
</html>
